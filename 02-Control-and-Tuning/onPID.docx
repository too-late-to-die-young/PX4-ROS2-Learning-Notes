pid学习心得
4. PID 学习心得与理论复盘
理论：我眼中的 PID

很多人把 PID 看成复杂的公式，但这次圆轨迹调参下来，我觉得它更像是一个**“有记性的弹簧”**：

    P (Proportional) 是“现在的力”： 目标和现状差多少，我就推多大劲。它是系统反应的基石，但它很“死板”，快到目标点时力就小了，容易在终点前被空气阻力或摩擦力挡住，形成稳态误差。

    I (Integral) 是“过去的累积”： 它记性很好。如果 P 够不到目标，I 就会把随时间流逝没补上的误差一点点攒起来，最后憋出一个大招把飞机推到位。但 I 太重感情，容易用力过猛（超调）。

    D (Derivative) 是“对未来的预测”： 它盯着误差的变化率。如果发现飞机冲向目标的速度太快，D 就会提前拉闸，产生阻尼，防止飞机晃荡。

实战总结：圆轨迹调参的“血泪史”

在这次任务中，我最深刻的体会是：PID 不是孤立的，它是“环环相扣”的。

    内环稳，外环才能准： 起初我急着调 MPC_XY_P 让圆更圆，结果发现飞机抖得厉害。后来才意识到，**速度环（内环）**才是基础。如果内环的 VEL_P 不够，外环给再大的位置指令，电机也跟不上，就像是一个反应迟钝的人去接球，手跑得再快脑子也转不过来。

    扰动是最好的老师： 我尝试用 Gazebo 的 Apply Force 给飞机一记“侧踹”。观察它在被击退后是稳稳飞回（P, D 配合好），还是像果冻一样左右摇晃（I 太大或 D 太小），这比盯着静止的飞机调参直观得多。

    前馈（Feedforward）才是真神： 单纯靠 PID 是“追着误差跑”，永远会有延迟。加入前馈后，程序提前告诉飞控“我要加速了”，PID 只需要负责修补微小的扰动。在 PlotJuggler 里看到轨迹从“鸭蛋”变回“正圆”的那一刻，我才理解为什么工业级控制一定要加前馈。